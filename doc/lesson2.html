<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Implementation of Financial Models</title>
  <style type="text/css">code{white-space: pre;}</style>
  <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
  <link rel="stylesheet" href="main.css" type="text/css">
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    displayAlign: "left",
    displayIndent: "2em",
    "HTML-CSS": {
      preferredFonts: "TeX",
  /*    webFont:"Neo-Euler", */
      undefinedFamily:"'Arial Unicode MS',serif"
    }
  });
  </script>
</head>
<body>
<div id="header">
<h1 class="title"><a href="index.html">Implementation of Financial Models</a></h1>
</div>
<h1 id="lesson-2">Lesson 2</h1>
<blockquote>
<p><i>“The manifest characteristic of (21) is the number of variables that it does not depend on”</i></p>
</blockquote>
<p>Reading: <a href="http://kalx.net/BlaSch1973.pdf">The Pricing of Options and Corporate Liabilities</a>, <a href="http://kalx.net/Mer1973.pdf">Theory of rational option pricing</a>, <a href="http://kalx.net/bms.pdf">Black-Scholes/Merton</a>.</p>
<h2 id="black-scholesmerton">Black-Scholes/Merton</h2>
<p>The value of an European put option is <span class="math">\(v = e^{-rt}E\max\{k - S_t,0\}\)</span>, where <span class="math">\(S_t = se^{rt - \sigma^2t/2 + \sigma B_t}\)</span>. Here, <span class="math">\(r\)</span> is the continuously compounded risk-free rate, <span class="math">\(t\)</span> is the time in years to option expiration, <span class="math">\(k\)</span> is the strike of the option, <span class="math">\(s\)</span> is the current stock price, <span class="math">\(\sigma\)</span> is the volatility, and <span class="math">\(B_t\)</span> is standard Brownian motion.</p>
<p>It is more convenient to work with the Black formula for the forward value of the option <span class="math">\(E\max\{k - F_t,0\}\)</span>, where <span class="math">\(F_t = fe^{-\sigma^2t/2 + \sigma B_t}\)</span> and <span class="math">\(f = se^{rt}\)</span> is the forward value of the stock at time <span class="math">\(t\)</span>.</p>
<p>If <span class="math">\(F\)</span> is lognormal, i.e., <span class="math">\(F = e^N\)</span> for some normally distributed random variable <span class="math">\(N\)</span>, <span class="math">\(EF \phi(F) = EF E\phi(Fe^{\mathrm{Var}(\log F)})\)</span>, hence</p>
<p><span class="math">\[\begin{align*}
E\max\{k - F,0\} &amp;= E(k - F)1(F\le k)\\
 &amp;= kE1(F\le k) - EF E1(Fe^{\sigma^2t}\le k)\\
 &amp;= kP(F\le k) - fP(Fe^{\sigma^2t}\le k).\\
\end{align*}\]</span></p>
<h1 id="homework">Homework</h1>
<p>Due September 22 at 5pm. Late homework will not be accepted. Each exercise is worth 20 points. Give a mathematicaly convincing argument for your work.</p>
<p><em>Exercise 1</em>. (20 points) Show <span class="math">\(F\le k\)</span> if and only if <span class="math">\(B_t/\sqrt{t}\le (\log k/f)/\sigma\sqrt{t} + \sigma\sqrt{t}/2\)</span> and <span class="math">\(Fe^{\sigma^2t}\le k\)</span> if and only if <span class="math">\(B_t/\sqrt{t}\le (\log k/f)/\sigma\sqrt{t} - \sigma\sqrt{t}/2\)</span>.</p>
<p>If <span class="math">\(F\)</span> is lognormal then <span class="math">\(dE\phi(F)/df = E\phi&#39;(F)e^{-\sigma^2t/2+\sigma B_t} = E\phi&#39;(Fe^{\sigma^2t})\)</span>.</p>
<p><em>Exercise 2</em>. (20 points) Show delta <span class="math">\(dE(k - F)^+/df = -N((\log k/f)/\sigma\sqrt{t} - \sigma\sqrt{t}/2)\)</span>.</p>
<p><em>Exercise 3</em>. (20 points) Implement delta in <a href="http://libfms.codeplex.com/SourceControl/latest#option/black.h">black.h</a></p>
<p><em>Exercise 4</em>. (20 points) Add a test for delta at the end of <code>black.h</code>.</p>
<p><em>Exercise 5</em>. (20 points) Implement an add-in for delta in <a href="http://libfms.codeplex.com/SourceControl/latest#xllfms/xllblack.cpp">xllblack.cpp</a></p>
<h3 id="appendix">Appendix</h3>
<p>Define the <em>moneyness</em> <span class="math">\(z(k;f,\sigma,t) = (\log k/f)/\sigma\sqrt{t} - \sigma\sqrt{t}/2\)</span>. Note <span class="math">\(z^{-1}(y) = fe^{-\sigma^2t/2 + \sigma\sqrt{t}y} Recall \)</span>Fk$ iff <span class="math">\(B_t/\sqrt{t} \le \phi(k)\)</span>.</p>
<p>The payoff of a put (<span class="math">\(c = -1\)</span>) or call (<span class="math">\(c = 1\)</span>) is <span class="math">\(\max\{c(x - k),0\}\)</span>.</p>
<h4 id="delta">Delta</h4>
<p>Since <span class="math">\(\partial v/\partial f = E\phi&#39;(Fe^{\sigma^2t})\)</span> the delta of a put or call is <span class="math">\(Ec1(cx\ge ck) = cP(cF\ge ck) = cN(z(cke^{\sigma^2t}))\)</span>.</p>
<p>If <span class="math">\(X\)</span> has cumulative distribution function <span class="math">\(F\)</span>, then <span class="math">\(\psi(X)\)</span> has cdf <span class="math">\(G = F\circ\psi^{-1}\)</span> and so the the probability density function (if it exists) is <span class="math">\(g = G&#39; = F&#39;\circ\psi^{-1}(\psi^{-1})&#39;\)</span>.</p>
<h4 id="gamma">Gamma</h4>
<p>Since <span class="math">\(\partial^2 v/\partial f^2 = E\phi&#39;&#39;(Fe^{2\sigma^2t}) = Ec\delta_{k}(Fe^{2\sigma^2t})\)</span>, where <span class="math">\(\delta_k\)</span> is a delta function with unit mass at <span class="math">\(k\)</span>, we have</p>
<h4 id="vega">Vega</h4>
<p>Vega is <span class="math">\(B_t/P\)</span> is bm iff <span class="math">\(B_t - \sigma t/Q\)</span> is bm where <span class="math">\(dQ/dP = e^{-\sigma^2t/2 + \sigma B_t}\)</span>.</p>
<p><span class="math">\[\begin{align*}
\partial v/\partial\sigma &amp;= E\phi&#39;(F)F(-\sigma t + \sigma B_t)\\
 &amp;= fE\phi&#39;(F^{\sigma^2t})B_t\\
\end{align*}\]</span></p>
<h4 id="theta">Theta</h4>
</body>
</html>
